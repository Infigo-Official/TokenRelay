# TokenRelay Docker Environment Configuration Template
# Copy this file to .env and customize the values for your environment

# Configuration Mode
# Use 'file' to load from mounted tokenrelay.json file
# Use 'env' to load from TOKENRELAY_CONFIG_JSON environment variable
TOKENRELAY_CONFIG_MODE=file

# When using env mode, provide the entire configuration as JSON
# Example (uncomment and modify):
# TOKENRELAY_CONFIG_JSON={"proxy":{"auth":{"tokens":["your-token-here"],"encryptionKey":"your-encryption-key"},"targets":{"example":{"endpoint":"https://api.example.com","description":"Example API"}}}}

# Application Environment
ASPNETCORE_ENVIRONMENT=Production

# Ports
TOKENRELAY_PORT=80
TOKENRELAY_EXTERNAL_PORT=5163
NGINX_EXTERNAL_PORT=8080

# Volumes (adjust paths as needed)
TOKENRELAY_CONFIG_PATH=./config/tokenrelay.json
TOKENRELAY_UPLOADS_PATH=./uploads
TOKENRELAY_LOGS_PATH=./logs
TOKENRELAY_CERTS_PATH=./certs

# OAuth2 Server Configuration (included by default for testing)
OAUTH_SERVER_EXTERNAL_PORT=8080
OAUTH_DB_USER=oauth2
OAUTH_DB_PASSWORD=oauth2secret
OAUTH_DB_NAME=oauth2
OAUTH_DB_CONTAINER=tokenrelay-oauth-db
OAUTH_REDIS_CONTAINER=tokenrelay-oauth-redis
OAUTH_SERVER_CONTAINER=tokenrelay-oauth-server

# ============================================================================
# New Relic APM Configuration (Optional)
# ============================================================================
# Enable/disable New Relic APM monitoring
# Set to 'true' to enable APM (requires license key)
NEW_RELIC_ENABLED=false

# Your New Relic license key (required when NEW_RELIC_ENABLED=true)
# Get this from: one.newrelic.com > API Keys > License key
# WARNING: Never commit your actual license key to source control!
NEW_RELIC_LICENSE_KEY=

# Application name as it will appear in New Relic APM
NEW_RELIC_APP_NAME=TokenRelay

# ============================================================================
# Infinite Tracing Configuration (Optional - for 100% trace capture)
# ============================================================================
# Trace observer host for Infinite Tracing (tail-based sampling)
# Set up a trace observer at: one.newrelic.com > Infinite Tracing settings
# Enter the endpoint WITHOUT the https:// prefix
# Example: your-observer.aws-us-east-1.infinitetracing.com
NEW_RELIC_TRACE_OBSERVER_HOST=

# ============================================================================
# New Relic Agent Logging (Optional)
# ============================================================================
# Agent log level for troubleshooting (debug, info, warn, error)
# Use 'debug' temporarily if you need to troubleshoot agent issues
NEW_RELIC_LOG_LEVEL=info

# ============================================================================
# New Relic Configuration File (Optional)
# ============================================================================
# Path to custom newrelic.config file (default uses the bundled config)
# NEWRELIC_CONFIG_PATH=./newrelic.config
